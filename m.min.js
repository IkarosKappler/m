!function(t){"use strict";var i=(window?window:module.exports).M=i||{};i.DEG2RAD=Math.PI/180,i.RAD2DEG=180/Math.PI,i.TWOPI=2*Math.PI,i.atanYX=function(t,i){return Math.atan2(-i,t)},i.wrapTo2Pi=function(t){return 0<t?2*Math.PI-t:-t}}(),function(t){"use strict";M.Point=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i},M.Point.prototype.inverse=function(){return this.x=-this.x,this.y=-this.y,this},M.Point.prototype.clone=function(){return new Point(this.x,this.y)}}(window||module.exports),function(t){"use strict";M.Ellipse=function(t,i,n){void 0===n&&(n=new M.Point),this.a=t,this.b=i,this.center=n},M.Ellipse.prototype.computeArea=function(){return Math.PI*this.a*this.b},M.Ellipse.prototype.getPointAtT=function(t){return new M.Point(this.a*Math.cos(t),this.b*Math.sin(t))},M.Ellipse.prototype.getPointAtTheta=function(t){var i=new M.Ellipse(Math.max(this.a,this.b),Math.max(this.a,this.b)).getPointAtT(t);return this.getCentralLineIntersection(i)},M.Ellipse.prototype.getCentralLineIntersection=function(t){var i=this.a*this.b/Math.sqrt(this.a*this.a*t.y*t.y+this.b*this.b*t.x*t.x);return t.y,new M.Point(i*t.x,i*t.y)},M.Ellipse.prototype.sectorize=function(t,i){void 0===i&&(i=0);for(var n=[],o=[],e=2*Math.PI/t,a=i+e,r=i,s=0;s<t;s++){var h=this.getPointAtT(a);o.push(h);var l=M.wrapTo2Pi(M.atanYX(h.x,h.y));n.push(new M.EllipticSector(this,r,l)),a+=e,r=l}return{points:o,sectors:n}}}(window||module.exports);var e=new M.Ellipse(250,150);console.log(JSON.stringify(e)),function(t){"use strict";M.EllipticSector=function(t,i,n){this.ellipse=t,this.theta0=i,this.theta1=n},M.EllipticSector.prototype.getTheta=function(){return this.theta1-this.theta0},M.EllipticSector.prototype.computeArea=function(){var t=this.getTheta(),i=this.ellipse.a,n=this.ellipse.b;return area=i*n/2*(t-Math.atan((n-i)*Math.sin(2*this.theta1)/(i+n+(n-i)*Math.cos(2*this.theta1)))+Math.atan((n-i)*Math.sin(2*this.theta0)/(i+n+(n-i)*Math.cos(2*this.theta0))))}}(window||module.exports),function(){"use strict";M.Matrix=function(t,i,n){if("object"!=typeof t&&"array"!=typeof t)"number"==typeof i?(this.n=i,this.m=t,this.data=r(t,i,void 0!==n?n:function(t,i){return t==i?1:0})):(this.n=1,this.m=1,this.data=[t]);else{var o=i;if("number"==typeof o){if(o<0)throw"Cannot create matrix with negative width ("+o+")";if(0==o)this.data=[],this.n=0,this.m=0;else{this.data=[];for(var e=0;e<t.length;){for(var a=t.slice(e,e+o);a.length<o;)a.push(0);this.data.push(a),e+=a.length}this.n=o,this.m=this.data.length}}else this.data=t,this.m=t.length,this.n=0==t.length?0:t[0].length}},M.Matrix.prototype.clone=function(){return new M.Matrix(o(this.data))},M.Matrix.prototype.eval=function(t){if(this.m!=t.length)throw"Cannot evaluate function with vector of "+t.length+" elements and a "+this.m+"x"+this.n+" matrix.";for(var i=a(this.m,0),n=0;n<this.m;n++)for(var o=0;o<this.n;o++)i[n]+=this.data[n][o]*t[n];return i},M.Matrix.prototype.addColumn=function(t){if(this.m!=t.length)throw"Cannot add a column vector with "+t.length+" elements to an "+this.m+"x"+this.n+" matrix.";for(var i=0;i<t.length;i++)this.data[i].push(t[i]);return this.n++,this},M.Matrix.prototype.addRow=function(t){if(this.n!=t.length)throw"Cannot add a column vector with "+t.length+" elements to an "+this.m+"x"+this.n+" matrix.";return this.data.push(i(t)),this.m++,this},M.Matrix.prototype.mul=function(t){if(this.n!=t.m)throw"Cannot multiply a "+this.m+"x"+this.n+" matrix with a "+t.m+"x"+t.n+" one.";for(var i=this.clone(),n=0;n<this.m;n++)for(var o=0;o<this.n;o++)i.data[n][o]=e(this,n,t,o);return i},M.Matrix.prototype.gaussianElimination=function(){for(var t=0;t<this.n;t++){for(var i=Math.abs(this.data[t][t]),n=t,o=t+1;o<this.n;o++)Math.abs(this.data[o][t])>i&&(i=Math.abs(this.data[o][t]),n=o);for(o=t;o<this.n;o++){var e=this.data[n][o];this.data[n][o]=this.data[t][o],this.data[t][o]=e}for(o=t+1;o<this.n;o++)for(var a=-this.data[o][t]/this.data[t][t],r=t;r<this.n;r++)t===r?this.data[o][r]=0:this.data[o][r]+=a*this.data[t][r]}},M.Matrix.prototype.empty=function(){return 0==this.m||0==this.n},M.Matrix.prototype.det=function(){for(var t=0,i=0;i<this.n;i++)t+=this.diagonalProduct(i,!1),t-=this.diagonalProduct(i,!0);return t},M.Matrix.prototype.trace=function(){for(var t=Math.min(this.m,this.n),i=0,n=0;n<t;n++)i+=this.data[n][n];return i},M.Matrix.prototype.diagonalProduct=function(t,i){if(this.empty())return 0;for(var n=1,o=0;o<this.m;o++)n*=i?this.data[this.m-1-o][(t+o)%this.n]:this.data[o][(t+o)%this.n];return n},M.Matrix.prototype.toString=function(t){for(var i=t?s(this):a(this.n,0),n=["[\n"],o=0;o<this.m;o++){n.push(" [");for(var e=0;e<this.n;e++)n.push(h(i[e],this.data[o][e])),e+1<this.n&&n.push(",");n.push("]"),o+1<this.m&&n.push(","),n.push("\n")}return n.push("]"),n.join("")};var a=function(t,i){for(var n=[],o=0;o<t;o++)n.push(i);return n},i=function(t){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i},o=function(t){for(var i=[],n=0;n<t.length;n++)"object"==typeof t[n]||"array"==typeof t[n]?i.push(o(t[n])):i.push(t[n]);return i},r=function(t,i,n){for(var o="function"==typeof n?n:function(t,i){return n},e=[],a=0;a<t;a++){for(var r=[],s=0;s<i;s++)r.push(o(s,a));e.push(r)}return e},e=function(t,i,n,o){for(var e=0,a=0;a<t.n;a++)e+=t.data[i][a]*n.data[a][o];return e},s=function(t){for(var i=a(t.n,0),n=0;n<t.m;n++)for(var o=0;o<t.n;o++)i[o]=Math.max(i[o],(""+t.data[n][o]).length);return i},h=function(t,i){return a(t-(""+i).length," ").join("")+i};M.Matrix.identity=function(t,i){return new M.Matrix(t,void 0===i?t:i)}}();var mA=new M.Matrix(3,4);console.log("[A] mA is instance of M.Matrix: "+(mA instanceof M.Matrix)),console.log("[A] width(n): "+mA.n+", height(m): "+mA.m),console.log(mA.toString()),console.log("[A] det="+mA.det()),console.log("[A] trace="+mA.trace());var mB=new M.Matrix([0,1,2,3,4,5,6,7,8],3);console.log("[B] width(n): "+mB.n+", height(m): "+mB.m),console.log(mB.toString(!0)),console.log("[B] det="+mB.det()),console.log("[B] trace="+mB.trace()),console.log("Multiply // matrix^2");var mBquad=mB.mul(mB);console.log(mBquad.toString(!0)),console.log("[B] det="+mB.det()),console.log("[B] trace="+mB.trace());var identity3=M.Matrix.identity(3);console.log("[identity3] width(n): "+identity3.n+", height(m): "+identity3.m),console.log(identity3.toString(!0)),console.log("[identity3] det="+identity3.det()),console.log("[itentity3] trace="+identity3.trace());var mD=new M.Matrix([[4,3,2],[3,2,1],[2,1,0]]);console.log("[D] width(n): "+mD.n+", height(m): "+mD.m),console.log(mD.toString()),console.log("[D] det="+mD.det()),console.log("[D] trace="+mD.trace()),console.log("[D] cloning ...");var mDclone=mD.clone();console.log("[D.clone] width(n): "+mDclone.n+", height(m): "+mDclone.m),console.log(mDclone.toString(!0)),console.log("Gaussian elimination ... "),mD.gaussianElimination(),console.log(mD.toString(!0)),console.log("[D] Add column ... "),mD.addColumn([10,9,8]),console.log(mD.toString(!0)),console.log("[D] Add row ... "),mD.addRow([20,21,22,23]),console.log(mD.toString(!0));var x=[1,1,1,1];console.log("[D] Evaluating with vector: x="+JSON.stringify(x));var y=mD.eval(x);console.log("[D] y="+JSON.stringify(y)),console.log("[D] Evaluating Identity with vector: x="+JSON.stringify(x));var y2=M.Matrix.identity(4).eval(x);console.log("[D] y2="+JSON.stringify(y2));