M.Ellipse=function(t,i,e){void 0===e&&(e=new M.Point),this.a=t,this.b=i,this.center=e},M.Ellipse.prototype.computeArea=function(){return Math.PI*this.a*this.b},M.Ellipse.prototype.getPointAtT=function(t){return new M.Point(this.a*Math.cos(t),this.b*Math.sin(t))},M.Ellipse.prototype.getPointAtTheta=function(t){var i=new M.Ellipse(Math.max(this.a,this.b),Math.max(this.a,this.b)).getPointAtT(t);return this.getCentralLineIntersection(i)},M.Ellipse.prototype.getCentralLineIntersection=function(t){var i=this.a*this.b/Math.sqrt(this.a*this.a*t.y*t.y+this.b*this.b*t.x*t.x);return t.y<0&&console.log(JSON.stringify(t)),new M.Point(i*t.x,i*t.y)},M.Ellipse.prototype.sectorize=function(t,i){void 0===i&&(i=0);for(var e=[],n=[],s=2*Math.PI/t,o=i+s,h=i,a=0;a<t;a++){var r=this.getPointAtT(o);n.push(r);var p=M.wrapTo2Pi(M.atanYX(r.x,r.y));e.push(new M.EllipticSector(this,h,p)),o+=s,h=p}return{points:n,sectors:e}},M.Ellipse.prototype.scale=function(t,i){return this.a*=t,this.b*=i,this};var e=new M.Ellipse(250,150);console.log(JSON.stringify(e)),M.EllipticSector=function(t,i,e){this.ellipse=t,this.theta0=i,this.theta1=e},M.EllipticSector.prototype.getTheta=function(){return this.theta1-this.theta0},M.EllipticSector.prototype.computeArea=function(){var t=this.getTheta(),i=this.ellipse.a,e=this.ellipse.b;return area=i*e/2*(t-Math.atan((e-i)*Math.sin(2*this.theta1)/(i+e+(e-i)*Math.cos(2*this.theta1)))+Math.atan((e-i)*Math.sin(2*this.theta0)/(i+e+(e-i)*Math.cos(2*this.theta0))))},M.Point=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i},M.Point.prototype.inverse=function(){return this.x=-this.x,this.y=-this.y,this},M.Point.prototype.clone=function(){return new Point(this.x,this.y)};var M=M||{};M.atanYX=function(t,i){return Math.atan2(-i,t)},M.wrapTo2Pi=function(t){return 0<t?2*Math.PI-t:-t};